<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zyy.zyxk.dao.TeacherMapper">
    <select id="getLogin" resultType="com.zyy.zyxk.api.vo.LoginVo">
        select
            t.teacher_id,
            t.teacher_name,
            t.phone,
            t.school_id,
            sa.authority_permission
        from teacher t
        left join teacher_role_rel trr on trr.teacher_id = t.teacher_id
        left join role r on r.role_id = trr.role_id
        left join role_authority_rel rar on rar.role_id = trr.role_id
        left join sys_authority sa on sa.authority_id = rar.authority_id
        where t.phone = #{userName} and is_del = 1
    </select>
</mapper>